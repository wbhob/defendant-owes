{"dependencies":[{"name":"../utils/abs-floor","loc":{"line":1,"column":21}},{"name":"../units/offset","loc":{"line":2,"column":32}},{"name":"../units/aliases","loc":{"line":3,"column":31}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.diff = diff;\n\nvar _absFloor = require(\"../utils/abs-floor\");\n\nvar _absFloor2 = _interopRequireDefault(_absFloor);\n\nvar _offset = require(\"../units/offset\");\n\nvar _aliases = require(\"../units/aliases\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction diff(input, units, asFloat) {\n  var that, zoneDelta, delta, output;\n\n  if (!this.isValid()) {\n    return NaN;\n  }\n\n  that = (0, _offset.cloneWithOffset)(input, this);\n\n  if (!that.isValid()) {\n    return NaN;\n  }\n\n  zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;\n\n  units = (0, _aliases.normalizeUnits)(units);\n\n  switch (units) {\n    case 'year':\n      output = monthDiff(this, that) / 12;break;\n    case 'month':\n      output = monthDiff(this, that);break;\n    case 'quarter':\n      output = monthDiff(this, that) / 3;break;\n    case 'second':\n      output = (this - that) / 1e3;break; // 1000\n    case 'minute':\n      output = (this - that) / 6e4;break; // 1000 * 60\n    case 'hour':\n      output = (this - that) / 36e5;break; // 1000 * 60 * 60\n    case 'day':\n      output = (this - that - zoneDelta) / 864e5;break; // 1000 * 60 * 60 * 24, negate dst\n    case 'week':\n      output = (this - that - zoneDelta) / 6048e5;break; // 1000 * 60 * 60 * 24 * 7, negate dst\n    default:\n      output = this - that;\n  }\n\n  return asFloat ? output : (0, _absFloor2.default)(output);\n}\n\nfunction monthDiff(a, b) {\n  // difference in months\n  var wholeMonthDiff = (b.year() - a.year()) * 12 + (b.month() - a.month()),\n\n  // b is in (anchor - 1 month, anchor + 1 month)\n  anchor = a.clone().add(wholeMonthDiff, 'months'),\n      anchor2,\n      adjust;\n\n  if (b - anchor < 0) {\n    anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n    // linear across the month\n    adjust = (b - anchor) / (anchor - anchor2);\n  } else {\n    anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n    // linear across the month\n    adjust = (b - anchor) / (anchor2 - anchor);\n  }\n\n  //check for negative zero, return zero if negative zero\n  return -(wholeMonthDiff + adjust) || 0;\n}"},"hash":"18ece89de89ed20fa4119fdb61258da4"}